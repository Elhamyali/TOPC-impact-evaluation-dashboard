---
title: "TOPC Cohort 3 Analysis"
subtitle: "Post-test"
author: "Elham Ali"
date: Dec 11, 2023
format:
  html:
    toc: true
    code-fold: true
    code-summary: "Show the code"
editor: visual
---

Graphs for post-test survey analysis for city governments.

## Participant Background

**Q3. Which city/county are you representing?**

-   **Akron, OH** and **Macon-Bibb County, GA** are the most represented in the survey, each with 4 responses.

-   **Miami-Dade County, FL** follows with 3 responses.

-   **Detroit, MI** has the fewest responses, with only 2.

```{r}
#| label: q3
#| message: false
# Set a CRAN mirror
options(repos = c(CRAN = "https://cloud.r-project.org"))

# Install necessary packages
# install.packages("magrittr")
# install.packages("dplyr")
# install.packages("ggplot2")
# install.packages("knitr")
# install.packages("KableExtra")

# Load the packages
library(magrittr)
library(dplyr)
library(ggplot2)
library(knitr)
library(kableExtra)

# Read the data from the CSV file
cohort3FinalGov <- read.csv("~/Documents/R Projects/TOPC-impact-evaluation-dashboard/Cohort 3/cohort3FinalGov2.csv")

# Analyze and visualize the "q3" column
q3_summary_df <- cohort3FinalGov %>%
  group_by(q3) %>%
  summarise(Frequency = n())

# Calculate total number of responses for the title
total_responses <- sum(q3_summary_df$Frequency)
names(q3_summary_df)[1] <- "City"

# Order cities by frequency and converting to factor
q3_summary_df <- q3_summary_df %>%
  mutate(City = factor(City, levels = City[order(-Frequency)]))

# Plot the data
ggplot(q3_summary_df, aes(x = City, y = Frequency)) +
  geom_bar(stat = "identity", fill = "#6eaddc", width = 0.5) +
  coord_flip() +
  labs(title = paste("All city governments participated in the survey with 
highest from Akron and Macon-Bibb County (n =", total_responses,")."),
       x = "",
       y = "Number of Responses") +
  theme_minimal() +
  theme(panel.grid.major.y = element_blank(),  
        panel.grid.minor.y = element_blank(),
        plot.title = element_text(face = "bold"))
```

```{r}
#| label: q3-summary
# | echo: false

summary(q3_summary_df)
# kable(summary(q3_summary_df), "html")
```

## Goal 1: Participant Awareness and Knowledge

## Goal 2: Participant Confidence and Competence

## Goal 3: Participant Recognition and Application of Methods

## Goal 4: Participant Satisfaction and Intention to Action

**Q4. I learned new skills in community research practices, such as leading interviews and conducting surveys, during this program.**

```{r}
#| label: q4
#| message: false

# Analyzing and visualizing the "q4" column
q4_summary_df <- cohort3FinalGov %>%
  group_by(q4) %>%
  summarise(Frequency = n())

# Calculate total number of responses
total_responses <- sum(q4_summary_df$Frequency)

# Plotting the data
ggplot(q4_summary_df, aes(x = q4, y = Frequency)) +
  geom_bar(stat = "identity", fill = "#6eaddc", width = 0.5) +
  coord_flip() +
  labs(title = "All respondents agree they learned new skills in community 
research practices.",
       subtitle = paste("Rating Scale: 1 - Strongly Agree to 4 - Strongly Disagree (n =", total_responses, ")"),
       x = "",
       y = "Number of Responses") +
  theme_minimal() +
  theme(panel.grid.major.y = element_blank(),  
        panel.grid.minor.y = element_blank(),
        plot.title = element_text(face = "bold"))
```

```{r}
#| label: q4-summary
# | echo: false
summary(q4_summary_df)
```

**Q5. I learned skills to promote equity and foster inclusive spaces in my work.**

```{r}
#| label: q5
#| message: false

# Analyze and visualize the "q5" column
q5_summary_df <- cohort3FinalGov %>%
  group_by(q5) %>%
  summarise(Frequency = n())

# Calculate total number of responses
total_responses <- sum(q5_summary_df$Frequency)

# Plotting the data
ggplot(q5_summary_df, aes(x = q5, y = Frequency)) +
  geom_bar(stat = "identity", fill = "#6eaddc", width = 0.5) +
  coord_flip() +
  labs(title = paste("All respondents agree they learned skills to promote equity and 
foster inclusive spaces in their work (n =", total_responses, ")."),
       subtitle = "Rating Scale: 1 - Strongly Agree to 4 - Strongly Disagree",
       x = "",
       y = "Number of Responses") +
  theme_minimal() +
  theme(panel.grid.major.y = element_blank(),  
        panel.grid.minor.y = element_blank(),
        plot.title = element_text(face = "bold"))
```

```{r}
#| label: q5-boxplot
#| echo: false
#| results: false

# # Create a summary dataframe for q5
# q5_summary_df <- cohort3FinalGov %>%
#   group_by(q5) %>%
#   summarise(Frequency = n())
# 
# # Calculate total number of responses
# total_responses <- sum(q5_summary_df$Frequency)
# 
# # Create a boxplot
# ggplot(q5_summary_df, aes(x = "", y = Frequency)) +
#   geom_boxplot(fill = "#6eaddc") +
#   labs(title = paste("Summary of Responses for",
#                      "Learning Skills to Promote Equity and Foster Inclusive Spaces (n =", total_responses, ")."),
#        subtitle = "Rating Scale: 1 - Strongly Agree to 4 - Strongly Disagree",
#        x = "",
#        y = "Number of Responses") +
#   theme_minimal() +
#   theme(panel.grid.major.y = element_blank(),
#         panel.grid.minor.y = element_blank(),
#         plot.title = element_text(face = "bold"))
```

```{r}
#| label: q5-summary
# | echo: false
summary(q5_summary_df)
```

**Q6. I learned new skills in applying user testing feedback to shape the development of our solution.**

```{r}
#| label: q6
#| message: false

# Analyze and visualize the "q6" column
q6_summary_df <- cohort3FinalGov %>%
  group_by(q6) %>%
  summarise(Frequency = n())

# Calculate total number of responses
total_responses <- sum(q6_summary_df$Frequency)

# Plotting the data
ggplot(q6_summary_df, aes(x = q6, y = Frequency)) +
  geom_bar(stat = "identity", fill = "#6eaddc", width = 0.5) +
  coord_flip() +
  labs(title = "All respondents agree they learned new skills to apply user 
testing feedback in their solution development.",
       subtitle = paste("Rating Scale: 1 - Strongly Agree to 4 - Strongly Disagree (n =", total_responses, ")"),
       x = "",
       y = "Number of Responses") +
  theme_minimal() +
  theme(panel.grid.major.y = element_blank(),  
        panel.grid.minor.y = element_blank(),
        plot.title = element_text(face = "bold"))
```

```{r}
#| label: q6-summary
# | echo: false
summary(q6_summary_df)
```

**Q7. My team has defined a role for residents or the community in designing services moving forward.**

```{}
```

Q8. What were your biggest takeaways from engaging in community research to learn more about the problem? Please provide a short example or story.
